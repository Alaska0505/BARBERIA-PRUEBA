<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BARBERIA_MACHO_ALFA</title>
  <link rel="stylesheet" href="HOJA1.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://www.paypal.com/sdk/js?client-id=YOUR_CLIENT_ID&currency=MXN"></script>
</head>
<body>

  <header>
    <section class="logo">
      <h1><img src="ima.png" alt="Logo de la pÃ¡gina">BARBERIA MACHO ALFA</h1>
    </section>
    <div class="franja-roja">
      <nav>
        <div class="menu">
          <BR>
          <ul>
            <li><a href="Index.html">INICIO</a></li>
            <LI>PRODUCTOS</LI>
            <li><a href="CORTES.html">CORTES</a></li>
            <li><a href="CITAS.html">CITAS</a></li>
            <li><a href="CHATBOT.html">CHATBOT</a></li>
          </ul>
        </div>
      </nav>
    </div>
  </header>

  <div class="separador-azul"></div>

  <div class="titulo">
    <h1>Productos Macho Alfa</h1>
  </div>

  <div class="galeria">
    <div class="producto">
      <img src="pomada.jpg" alt="Pomada Matte Firme"><BR><BR><BR><BR>
      <h3>Pomada Matte Firme - $289</h3>
      <button onclick="agregarAlCarrito('Pomada Matte Firme', 289)">Agregar al carrito</button>
    </div>

    <div class="producto">
      <img src="pomada2.jpg" alt="Pomada FijaciÃ³n Fuerte"><BR><BR><BR><BR>
      <h3>Pomada FijaciÃ³n Fuerte - $289</h3>
      <button onclick="agregarAlCarrito('Pomada FijaciÃ³n Fuerte', 289)">Agregar al carrito</button>
    </div>

    <div class="producto">
      <img src="risos.jpg" alt="Tratamiento Rizos">
      <h3>Tratamiento Rizos Definidos - $199</h3>
      <button onclick="agregarAlCarrito('Tratamiento Rizos Definidos', 199)">Agregar al carrito</button>
    </div>
  </div>

  <div class="carrito">
    <h2>ðŸ›’ Tu carrito</h2>
    <ul id="lista-carrito"></ul>
    <p>Total: $<span id="total">0</span></p>
    <button onclick="vaciarCarrito()">Vaciar carrito</button>
    <button class="finalizar" onclick="generarPDF()">Descargar ticket en PDF</button>
  </div>

 
  <footer>
    <p>Macho Alfa Online Â© 2025 |</p>
  </footer>

  <script>
    let carrito = JSON.parse(localStorage.getItem('carrito')) || [];
    let total = parseFloat(localStorage.getItem('total')) || 0;

    function agregarAlCarrito(producto, precio) {
      const existente = carrito.find(item => item.producto === producto);
      if (existente) {
        existente.cantidad += 1;
        existente.precioTotal = existente.cantidad * existente.precioUnitario;
      } else {
        carrito.push({ producto, precioUnitario: precio, cantidad: 1, precioTotal: precio });
      }
      total += precio;
      guardarCarrito();
      actualizarCarrito();
    }

    function eliminarProducto(index) {
      total -= carrito[index].precioTotal;
      carrito.splice(index, 1);
      guardarCarrito();
      actualizarCarrito();
    }

    function actualizarCarrito() {
      const lista = document.getElementById('lista-carrito');
      lista.innerHTML = '';
      carrito.forEach((item, index) => {
        const li = document.createElement('li');
        li.innerHTML = `
          ${item.producto} x${item.cantidad} - $${item.precioTotal.toFixed(2)}
          <button onclick="eliminarProducto(${index})">Eliminar</button>
        `;
        lista.appendChild(li);
      });
      document.getElementById('total').textContent = total.toFixed(2);
    }

    function vaciarCarrito() {
      carrito = [];
      total = 0;
      guardarCarrito();
      actualizarCarrito();
    }

    function guardarCarrito() {
      localStorage.setItem('carrito', JSON.stringify(carrito));
      localStorage.setItem('total', total.toString());
    }

    function generarPDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();

  // Obtener fecha y hora actual
  const ahora = new Date();
  const fecha = ahora.toLocaleDateString('es-MX');
  const hora = ahora.toLocaleTimeString('es-MX');

  // Encabezado
  doc.setFontSize(16);
  doc.text("ðŸ§¾ Ticket de Compra - Macho Alfa", 20, 20);
  doc.setFontSize(12);
  doc.text(`Fecha: ${fecha}`, 20, 30);
  doc.text(`Hora: ${hora}`, 20, 37);

  // Detalles del carrito
  let y = 47;
  carrito.forEach(item => {
    doc.text(`${item.producto} x${item.cantidad} - $${item.precioTotal.toFixed(2)}`, 20, y);
    y += 10;
  });

  // Total y agradecimiento
  doc.setFontSize(14);
  doc.text(`Total pagado: $${total.toFixed(2)}`, 20, y + 10);
  doc.text("Gracias por tu compra. Â¡Vuelve pronto!", 20, y + 20);

  // Guardar PDF
  doc.save("ticket_macho_alfa.pdf");
}

    actualizarCarrito();

    paypal.Buttons({
      createOrder: function(data, actions) {
        return actions.order.create({
          purchase_units: [{
            amount: {
              value: total.toFixed(2)
            }
          }]
        });
      },
      onApprove: function(data, actions) {
        return actions.order.capture().then(function(details) {
          alert('Gracias por tu compra, ' + details.payer.name.given_name + '!');
          vaciarCarrito();
        });
      }
    }).render('#paypal-button-container');
  </script>
</body>
</html>
